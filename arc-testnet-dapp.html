<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ARC Protocol ‚Äî Testnet DApp</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300&family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
  :root {
    --bg:#04080f; --surface:#080f1c; --surface2:#0c1628; --surface3:#101e36;
    --border:#162844; --border2:#1e3860;
    --accent:#3b82f6; --cyan:#06b6d4; --green:#10b981; --orange:#f59e0b;
    --purple:#8b5cf6; --red:#ef4444; --gold:#fbbf24;
    --text:#e2eaf8; --text2:#94a3b8; --text3:#4f6890;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{background:var(--bg);color:var(--text);font-family:'Outfit',sans-serif;min-height:100vh;overflow-x:hidden}
  body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(59,130,246,.03) 1px,transparent 1px),linear-gradient(90deg,rgba(59,130,246,.03) 1px,transparent 1px);background-size:40px 40px;pointer-events:none;z-index:0}
  body::after{content:'';position:fixed;inset:0;background:radial-gradient(ellipse 70% 40% at 20% 0%,rgba(59,130,246,.09) 0%,transparent 60%),radial-gradient(ellipse 50% 35% at 90% 90%,rgba(139,92,246,.07) 0%,transparent 55%);pointer-events:none;z-index:0}

  header{position:sticky;top:0;z-index:200;background:rgba(4,8,15,.9);backdrop-filter:blur(24px);border-bottom:1px solid var(--border);padding:0 2rem;display:flex;align-items:center;justify-content:space-between;height:66px}
  .logo{font-family:'Outfit',sans-serif;font-size:1.5rem;font-weight:900;letter-spacing:-.04em;background:linear-gradient(120deg,#60a5fa,#06b6d4,#10b981);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  .header-right{display:flex;align-items:center;gap:.8rem}
  .net-pill{font-family:'DM Mono',monospace;font-size:.68rem;padding:5px 12px;background:rgba(59,130,246,.1);border:1px solid rgba(59,130,246,.35);border-radius:30px;color:#60a5fa;display:flex;align-items:center;gap:7px;letter-spacing:.05em}
  .net-dot{width:6px;height:6px;border-radius:50%;background:var(--green);box-shadow:0 0 6px var(--green);animation:blink 1.8s infinite}
  @keyframes blink{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.4;transform:scale(.8)}}
  .connect-btn{background:linear-gradient(135deg,var(--accent),var(--cyan));color:#fff;border:none;padding:9px 22px;border-radius:8px;font-family:'Outfit',sans-serif;font-weight:700;font-size:.88rem;cursor:pointer;transition:all .2s;box-shadow:0 4px 20px rgba(59,130,246,.3)}
  .connect-btn:hover{transform:translateY(-2px);box-shadow:0 6px 28px rgba(59,130,246,.45)}

  #wallet-status{background:linear-gradient(135deg,var(--surface),var(--surface2));border:1px solid var(--border2);border-radius:14px;padding:1.1rem 1.8rem;margin:1.4rem auto;max-width:960px;display:none;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:1rem;position:relative;z-index:1}
  #wallet-status.active{display:flex}
  .wallet-info{display:flex;align-items:center;gap:12px}
  .wallet-avatar{width:38px;height:38px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--purple));display:flex;align-items:center;justify-content:center;font-size:1.2rem}
  .wallet-addr{font-family:'DM Mono',monospace;font-size:.82rem;color:#60a5fa;letter-spacing:.02em}
  .wallet-type{font-size:.7rem;color:var(--text3);font-family:'DM Mono',monospace}
  .balance-strip{display:flex;gap:2.5rem}
  .bal-item{text-align:center}
  .bal-label{font-size:.65rem;color:var(--text3);font-family:'DM Mono',monospace;letter-spacing:.08em;margin-bottom:3px}
  .bal-val{font-size:1.15rem;font-weight:800;font-family:'Outfit',sans-serif;background:linear-gradient(135deg,#60a5fa,#06b6d4);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  .bal-val.green{background:linear-gradient(135deg,var(--green),#34d399);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  .bal-val.purple{background:linear-gradient(135deg,var(--purple),#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent}

  main{max-width:960px;margin:0 auto;padding:0 2rem 5rem;position:relative;z-index:1}

  .tabs{display:flex;gap:4px;margin-bottom:1.8rem;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:5px;flex-wrap:wrap}
  .tab-btn{padding:8px 16px;border-radius:8px;border:none;background:transparent;color:var(--text3);font-family:'Outfit',sans-serif;font-weight:600;font-size:.84rem;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:6px;white-space:nowrap}
  .tab-btn:hover{color:var(--text);background:var(--surface3)}
  .tab-btn.active{background:linear-gradient(135deg,rgba(59,130,246,.2),rgba(6,182,212,.15));color:#60a5fa;border:1px solid rgba(59,130,246,.3)}

  .panel{display:none;animation:fadeUp .25s ease}
  .panel.active{display:block}
  @keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

  .card{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:2rem;margin-bottom:1.5rem;position:relative;overflow:hidden}
  .card::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--accent),var(--cyan),transparent);opacity:.6}
  .card-title{font-size:1.15rem;font-weight:800;letter-spacing:-.02em;margin-bottom:.3rem;display:flex;align-items:center;gap:10px}
  .card-sub{font-size:.8rem;color:var(--text3);margin-bottom:1.5rem;font-family:'DM Mono',monospace;font-weight:300}

  .form-row{margin-bottom:1.1rem}
  label{font-size:.72rem;color:var(--text3);font-family:'DM Mono',monospace;display:block;margin-bottom:7px;letter-spacing:.06em}
  input,select,textarea{width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:12px 15px;color:var(--text);font-family:'Outfit',sans-serif;font-size:.9rem;transition:border-color .2s,box-shadow .2s;outline:none}
  input:focus,select:focus,textarea:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(59,130,246,.12)}
  textarea{resize:vertical;min-height:80px}
  select option{background:var(--surface2)}

  .fee-notice{background:rgba(139,92,246,.08);border:1px solid rgba(139,92,246,.25);border-radius:10px;padding:10px 14px;font-size:.75rem;font-family:'DM Mono',monospace;color:#a78bfa;margin-bottom:1.2rem;display:flex;align-items:center;gap:8px}

  .btn-primary{width:100%;padding:14px;background:linear-gradient(135deg,var(--accent),var(--cyan));color:#fff;border:none;border-radius:10px;font-family:'Outfit',sans-serif;font-weight:800;font-size:1rem;cursor:pointer;letter-spacing:-.01em;transition:all .2s;box-shadow:0 4px 20px rgba(59,130,246,.25)}
  .btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 28px rgba(59,130,246,.4)}
  .btn-primary:disabled{opacity:.4;cursor:not-allowed;transform:none;box-shadow:none}
  .btn-sm{padding:8px 16px;border-radius:8px;background:linear-gradient(135deg,var(--accent),var(--cyan));color:#fff;border:none;font-family:'Outfit',sans-serif;font-weight:700;font-size:.82rem;cursor:pointer;transition:all .2s;white-space:nowrap}
  .btn-sm:hover{transform:translateY(-1px)}
  .btn-outline{padding:8px 16px;border-radius:8px;background:transparent;border:1px solid var(--border2);color:var(--text2);font-family:'Outfit',sans-serif;font-weight:600;font-size:.82rem;cursor:pointer;transition:all .2s}
  .btn-outline:hover{border-color:var(--accent);color:#60a5fa}

  .swap-box{background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:1.1rem;margin-bottom:6px}
  .swap-input-row{display:flex;align-items:center;gap:.8rem}
  .swap-input-row input{flex:1}
  .token-badge{background:var(--surface3);border:1px solid var(--border2);color:var(--text);padding:10px 14px;border-radius:8px;font-family:'DM Mono',monospace;font-size:.82rem;cursor:pointer;white-space:nowrap}
  .swap-flip{text-align:center;padding:6px 0;font-size:1.5rem;color:var(--accent);cursor:pointer;transition:transform .4s}
  .swap-flip:hover{transform:rotate(180deg)}
  .swap-rate{font-family:'DM Mono',monospace;font-size:.72rem;color:var(--text3);margin-bottom:1rem}

  /* NFT */
  .nft-tabs{display:flex;gap:6px;margin-bottom:1.2rem;flex-wrap:wrap}
  .nft-tab{padding:7px 16px;border-radius:8px;border:1px solid var(--border);background:transparent;color:var(--text3);font-family:'Outfit',sans-serif;font-weight:600;font-size:.82rem;cursor:pointer;transition:all .2s}
  .nft-tab.active{background:rgba(59,130,246,.15);border-color:rgba(59,130,246,.4);color:#60a5fa}
  .nft-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(155px,1fr));gap:1rem;margin-bottom:1.2rem}
  .nft-card{background:var(--surface2);border:1px solid var(--border);border-radius:14px;overflow:hidden;cursor:pointer;transition:all .25s;position:relative}
  .nft-card:hover{border-color:var(--accent);transform:translateY(-4px);box-shadow:0 12px 30px rgba(0,0,0,.4)}
  .nft-card.selected{border-color:var(--cyan);box-shadow:0 0 0 2px rgba(6,182,212,.3)}
  .nft-card.listed-card{border-color:rgba(251,191,36,.4)}
  .nft-img{width:100%;aspect-ratio:1;display:flex;align-items:center;justify-content:center;font-size:3.5rem;position:relative;overflow:hidden}
  .nft-img-emoji{position:relative;z-index:1}
  .nft-badge{position:absolute;top:8px;right:8px;z-index:2;padding:3px 8px;border-radius:6px;font-size:.6rem;font-family:'DM Mono',monospace;font-weight:500}
  .nft-badge.listed{background:rgba(251,191,36,.2);color:var(--gold);border:1px solid rgba(251,191,36,.4)}
  .nft-badge.owned{background:rgba(16,185,129,.2);color:var(--green);border:1px solid rgba(16,185,129,.4)}
  .nft-info{padding:10px 12px}
  .nft-name{font-size:.82rem;font-weight:700;margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .nft-creator{font-size:.65rem;color:var(--text3);font-family:'DM Mono',monospace}
  .nft-price{font-size:.78rem;font-weight:700;color:var(--gold);margin-top:6px}
  .nft-actions{display:flex;gap:4px;margin-top:8px}
  .nft-coll{font-size:.62rem;color:var(--text3);font-family:'DM Mono',monospace;margin-top:2px}

  .post-nft-form{background:var(--surface2);border:1px solid var(--border2);border-radius:14px;padding:1.5rem;margin-bottom:1.5rem}
  .post-nft-form h4{font-size:1rem;font-weight:700;margin-bottom:1rem}
  .emoji-picker{display:grid;grid-template-columns:repeat(auto-fill,minmax(44px,1fr));gap:6px;margin-bottom:1rem}
  .emoji-opt{aspect-ratio:1;border:1px solid var(--border);border-radius:8px;background:var(--surface3);font-size:1.3rem;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s}
  .emoji-opt:hover{border-color:var(--accent);transform:scale(1.1)}
  .emoji-opt.selected{border-color:var(--cyan);background:rgba(6,182,212,.15)}
  .form-2col{display:grid;grid-template-columns:1fr 1fr;gap:.8rem}

  .period-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:.5rem;margin-bottom:1.1rem}
  .period-btn{padding:10px 6px;text-align:center;background:var(--surface2);border:1px solid var(--border);border-radius:10px;cursor:pointer;font-size:.72rem;font-family:'Outfit',sans-serif;font-weight:600;transition:all .2s;line-height:1.4}
  .period-btn:hover{border-color:var(--accent)}
  .period-btn.selected{background:rgba(59,130,246,.12);border-color:var(--accent);color:#60a5fa}
  .period-btn .apy{color:var(--green);font-size:.65rem;font-family:'DM Mono',monospace}
  .lock-preview{background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:1.1rem;margin-bottom:1.2rem}
  .lock-row{display:flex;justify-content:space-between;padding:5px 0;font-size:.82rem;border-bottom:1px solid var(--border)}
  .lock-row:last-child{border-bottom:none}
  .lock-row span:last-child{color:var(--cyan);font-weight:600;font-family:'DM Mono',monospace}
  .lock-item{background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:1.1rem;margin-bottom:.8rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.6rem}
  .lock-amount{font-size:1.05rem;font-weight:800;color:var(--cyan)}
  .lock-time{font-family:'DM Mono',monospace;font-size:.72rem;color:var(--text3);margin-top:3px}
  .unlock-btn{padding:7px 16px;border-radius:8px;border:1px solid var(--border2);background:transparent;color:var(--text2);font-family:'Outfit',sans-serif;font-size:.78rem;font-weight:600;cursor:pointer;transition:all .2s}
  .unlock-btn:not(:disabled):hover{border-color:var(--green);color:var(--green)}
  .unlock-btn:disabled{opacity:.4;cursor:not-allowed}

  .stats-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(170px,1fr));gap:1rem}
  .stat-card{background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:1.2rem;position:relative;overflow:hidden}
  .stat-card::after{content:'';position:absolute;bottom:0;left:0;right:0;height:2px;background:var(--bar,var(--accent));opacity:.5}
  .stat-label{font-size:.68rem;color:var(--text3);font-family:'DM Mono',monospace;letter-spacing:.08em;margin-bottom:6px}
  .stat-value{font-size:1.6rem;font-weight:900;color:var(--sc,#60a5fa);line-height:1}
  .stat-sub{font-size:.7rem;color:var(--text3);margin-top:4px;font-family:'DM Mono',monospace}

  .tx-item{background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:12px 15px;margin-bottom:6px;display:flex;align-items:center;justify-content:space-between;gap:1rem;animation:slideIn .3s ease;flex-wrap:wrap}
  @keyframes slideIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
  .tx-left{display:flex;align-items:center;gap:12px}
  .tx-icon{width:36px;height:36px;border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:1rem;flex-shrink:0}
  .tx-icon.transfer{background:rgba(59,130,246,.15)}
  .tx-icon.swap{background:rgba(6,182,212,.15)}
  .tx-icon.nft{background:rgba(251,191,36,.15)}
  .tx-icon.lock{background:rgba(139,92,246,.15)}
  .tx-desc{font-size:.83rem;font-weight:600}
  .tx-hash{font-size:.65rem;color:var(--text3);font-family:'DM Mono',monospace;margin-top:2px}
  .tx-status{font-size:.75rem;color:var(--green);font-weight:700;font-family:'DM Mono',monospace}

  /* ARC OVERVIEW */
  .arc-hero{background:linear-gradient(135deg,var(--surface),var(--surface2));border:1px solid var(--border2);border-radius:20px;padding:3rem 2rem;margin-bottom:1.5rem;text-align:center;position:relative;overflow:hidden}
  .arc-hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse 80% 60% at 50% -10%,rgba(59,130,246,.12),transparent 65%)}
  .arc-logo-big{font-family:'Outfit',sans-serif;font-size:3.8rem;font-weight:900;letter-spacing:-.05em;background:linear-gradient(120deg,#60a5fa 0%,#06b6d4 40%,#10b981 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:.5rem;position:relative}
  .arc-tagline{font-size:1.1rem;color:var(--text2);font-weight:400;margin-bottom:1.5rem;position:relative}
  .arc-pills{display:flex;gap:.6rem;justify-content:center;flex-wrap:wrap;position:relative}
  .arc-pill{padding:5px 14px;border-radius:20px;font-size:.75rem;font-family:'DM Mono',monospace;font-weight:500;border:1px solid}
  .arc-pill.blue{background:rgba(59,130,246,.1);border-color:rgba(59,130,246,.35);color:#60a5fa}
  .arc-pill.cyan{background:rgba(6,182,212,.1);border-color:rgba(6,182,212,.35);color:var(--cyan)}
  .arc-pill.green{background:rgba(16,185,129,.1);border-color:rgba(16,185,129,.35);color:var(--green)}
  .arc-pill.purple{background:rgba(139,92,246,.1);border-color:rgba(139,92,246,.35);color:#a78bfa}
  .arc-pill.orange{background:rgba(245,158,11,.1);border-color:rgba(245,158,11,.35);color:var(--orange)}

  .feature-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:1rem;margin-bottom:1.5rem}
  .feature-card{background:var(--surface2);border:1px solid var(--border);border-radius:14px;padding:1.4rem;transition:border-color .2s,transform .2s}
  .feature-card:hover{border-color:var(--accent);transform:translateY(-3px)}
  .feature-icon{font-size:2rem;margin-bottom:.8rem}
  .feature-title{font-size:1rem;font-weight:800;margin-bottom:.4rem}
  .feature-desc{font-size:.82rem;color:var(--text2);line-height:1.6}

  .arc-stats-row{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:.8rem;margin-bottom:1.5rem}
  .arc-stat{background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:1.1rem;text-align:center}
  .arc-stat-val{font-size:1.6rem;font-weight:900}
  .arc-stat-lbl{font-size:.68rem;color:var(--text3);font-family:'DM Mono',monospace;margin-top:3px;letter-spacing:.06em}

  .roadmap{position:relative;padding-left:2rem}
  .roadmap::before{content:'';position:absolute;left:8px;top:0;bottom:0;width:1px;background:linear-gradient(to bottom,var(--accent),var(--purple),transparent)}
  .roadmap-item{position:relative;margin-bottom:1.4rem;padding-left:1.2rem}
  .roadmap-dot{position:absolute;left:-2rem;top:4px;width:14px;height:14px;border-radius:50%;border:2px solid var(--accent);background:var(--bg);display:flex;align-items:center;justify-content:center}
  .roadmap-dot.done{background:var(--green);border-color:var(--green)}
  .roadmap-dot.now{background:var(--accent);box-shadow:0 0 12px var(--accent)}
  .roadmap-phase{font-size:.65rem;font-family:'DM Mono',monospace;color:var(--text3);margin-bottom:3px;letter-spacing:.08em}
  .roadmap-title{font-size:.95rem;font-weight:700;margin-bottom:3px}
  .roadmap-desc{font-size:.8rem;color:var(--text2);line-height:1.5}

  .modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.85);z-index:500;align-items:center;justify-content:center;backdrop-filter:blur(6px)}
  .modal-overlay.open{display:flex}
  .modal{background:var(--surface);border:1px solid var(--border2);border-radius:18px;padding:2rem;max-width:440px;width:92%;position:relative;box-shadow:0 30px 80px rgba(0,0,0,.6)}
  .modal h3{font-size:1.2rem;font-weight:800;margin-bottom:.5rem}
  .modal p{font-size:.85rem;color:var(--text2);line-height:1.6}
  .modal-close{position:absolute;top:1rem;right:1rem;background:var(--surface2);border:1px solid var(--border);border-radius:6px;color:var(--text3);width:28px;height:28px;cursor:pointer;font-size:.9rem;display:flex;align-items:center;justify-content:center;transition:all .2s}
  .modal-close:hover{color:var(--text);border-color:var(--accent)}
  .modal-btns{display:flex;gap:.8rem;margin-top:1.5rem}
  .btn-cancel{flex:1;padding:12px;border:1px solid var(--border2);background:none;color:var(--text2);border-radius:10px;font-family:'Outfit',sans-serif;font-weight:600;cursor:pointer;transition:all .2s}
  .btn-cancel:hover{border-color:var(--text3)}
  .wallet-option{background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:1rem 1.2rem;margin-bottom:.8rem;cursor:pointer;display:flex;align-items:center;gap:1rem;transition:all .2s;font-weight:600}
  .wallet-option:hover{border-color:var(--accent);background:rgba(59,130,246,.07)}
  .wallet-option-icon{font-size:2.2rem}
  .wallet-option-sub{font-size:.7rem;color:var(--text3);font-family:'DM Mono',monospace;font-weight:400}
  .confirm-detail{background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:1rem;margin:1rem 0;font-size:.82rem;line-height:1.8;font-family:'DM Mono',monospace}
  .cd-row{display:flex;justify-content:space-between}
  .cd-val{color:#60a5fa}
  .confirm-fee{color:#a78bfa}

  #toast-wrap{position:fixed;top:80px;right:1.5rem;z-index:999;display:flex;flex-direction:column;gap:8px;max-width:340px}
  .toast{background:var(--surface);border:1px solid var(--border2);border-radius:12px;padding:13px 16px;font-size:.8rem;font-family:'Outfit',sans-serif;display:flex;align-items:flex-start;gap:10px;box-shadow:0 10px 40px rgba(0,0,0,.5);animation:toastIn .3s cubic-bezier(.34,1.56,.64,1)}
  @keyframes toastIn{from{opacity:0;transform:translateX(40px) scale(.9)}to{opacity:1;transform:none}}
  .toast.success{border-left:3px solid var(--green)}
  .toast.error{border-left:3px solid var(--red)}
  .toast.info{border-left:3px solid var(--accent)}
  .toast-body{flex:1}
  .toast-title{font-weight:700;margin-bottom:2px}
  .toast-msg{font-size:.75rem;color:var(--text2)}
  .toast-hash{font-size:.62rem;color:var(--text3);font-family:'DM Mono',monospace;margin-top:4px}

  .builder-bar{text-align:center;padding:1.5rem;font-size:.72rem;color:var(--text3);font-family:'DM Mono',monospace;position:relative;z-index:1;border-top:1px solid var(--border)}
  .builder-bar a{color:var(--accent);text-decoration:none}
  .builder-bar a:hover{text-decoration:underline}

  @media(max-width:600px){
    main{padding:0 1rem 4rem}
    header{padding:0 1rem}
    .balance-strip{gap:1.2rem}
    .form-2col{grid-template-columns:1fr}
    .period-grid{grid-template-columns:repeat(2,1fr)}
    .arc-logo-big{font-size:2.5rem}
  }
</style>
</head>
<body>

<header>
  <div class="logo">ARC.PROTOCOL</div>
  <div class="header-right">
    <div class="net-pill"><div class="net-dot"></div>ARC TESTNET</div>
    <button class="connect-btn" id="connectBtn" onclick="openConnectModal()">Connect Wallet</button>
  </div>
</header>

<div id="wallet-status">
  <div class="wallet-info">
    <div class="wallet-avatar">üîê</div>
    <div>
      <div class="wallet-addr" id="walletAddr">‚Äî</div>
      <div class="wallet-type" id="walletType">‚Äî</div>
    </div>
  </div>
  <div class="balance-strip">
    <div class="bal-item"><div class="bal-label">USDC BALANCE</div><div class="bal-val" id="usdcBalance">1,000.00</div></div>
    <div class="bal-item"><div class="bal-label">LOCKED</div><div class="bal-val purple" id="lockedBal">0.00</div></div>
    <div class="bal-item"><div class="bal-label">TOTAL TXs</div><div class="bal-val green" id="txCountBal">0</div></div>
  </div>
</div>

<main>
  <div class="tabs">
    <button class="tab-btn active" onclick="switchTab('overview')">üåê Arc Overview</button>
    <button class="tab-btn" onclick="switchTab('transfer')">üí∏ Transfer</button>
    <button class="tab-btn" onclick="switchTab('swap')">üîÑ Swap</button>
    <button class="tab-btn" onclick="switchTab('nft')">üñºÔ∏è NFT Market</button>
    <button class="tab-btn" onclick="switchTab('lock')">üîí Lock</button>
    <button class="tab-btn" onclick="switchTab('dashboard')">üìä Dashboard</button>
  </div>

  <!-- ARC OVERVIEW -->
  <div id="panel-overview" class="panel active">
    <div class="arc-hero">
      <div class="arc-logo-big">ARC PROTOCOL</div>
      <div class="arc-tagline">The Next-Generation Testnet for Web3 Builders</div>
      <div class="arc-pills">
        <span class="arc-pill blue">Layer 2 Optimized</span>
        <span class="arc-pill cyan">EVM Compatible</span>
        <span class="arc-pill green">DeFi Native</span>
        <span class="arc-pill purple">NFT Marketplace</span>
        <span class="arc-pill orange">USDC Powered</span>
      </div>
    </div>

    <div class="card">
      <div class="card-title">‚ö° What is Arc Protocol?</div>
      <div style="font-size:.9rem;color:var(--text2);line-height:1.85;margin-bottom:1.2rem">
        Arc Protocol is a high-throughput testnet built for developers, DeFi explorers, and Web3 builders. Fully EVM-compatible, Arc gives you everything you need to test decentralized finance mechanics ‚Äî transfers, swaps, NFT trading, and yield generation ‚Äî without putting real money at risk.
      </div>
      <div style="font-size:.9rem;color:var(--text2);line-height:1.85">
        Powered by <strong style="color:#60a5fa">USDC</strong> as the primary settlement asset, Arc uses a transparent <strong style="color:#a78bfa">1 USDC flat fee</strong> per transaction ‚Äî automatically routed to the builder wallet ‚Äî creating a sustainable, incentive-aligned protocol model.
      </div>
    </div>

    <div class="feature-grid">
      <div class="feature-card"><div class="feature-icon">üí∏</div><div class="feature-title">Instant USDC Transfers</div><div class="feature-desc">Send USDC to any wallet address in seconds. Sub-second finality with complete on-chain receipts and transaction history.</div></div>
      <div class="feature-card"><div class="feature-icon">üîÑ</div><div class="feature-title">DEX Swap Engine</div><div class="feature-desc">Swap USDC, ETH, WBTC and ARB via Arc's built-in automated market maker. Real-time pricing with confirmation previews.</div></div>
      <div class="feature-card"><div class="feature-icon">üñºÔ∏è</div><div class="feature-title">NFT Marketplace</div><div class="feature-desc">Mint, list, buy, sell and transfer NFTs. Post your own creations to the community marketplace and set your own price.</div></div>
      <div class="feature-card"><div class="feature-icon">üîí</div><div class="feature-title">USDC Yield Locking</div><div class="feature-desc">Lock USDC for 7 to 365 days. Earn up to 15% APY. Funds secured on-chain and automatically released at maturity.</div></div>
      <div class="feature-card"><div class="feature-icon">üìä</div><div class="feature-title">Live Portfolio Dash</div><div class="feature-desc">Real-time stats on balance, locked positions, transaction count, NFT holdings, and fees paid ‚Äî all in one dashboard.</div></div>
      <div class="feature-card"><div class="feature-icon">üõ°Ô∏è</div><div class="feature-title">Testnet Safety</div><div class="feature-desc">Everything runs on Arc Testnet. Experiment freely with full DeFi features and zero real financial risk.</div></div>
    </div>

    <div class="card">
      <div class="card-title">üìà Protocol Statistics</div>
      <div class="card-sub">Live testnet metrics ‚Äî updated in real time</div>
      <div class="arc-stats-row">
        <div class="arc-stat"><div class="arc-stat-val" style="color:#60a5fa">12,847</div><div class="arc-stat-lbl">TOTAL TXs</div></div>
        <div class="arc-stat"><div class="arc-stat-val" style="color:var(--green)">3,291</div><div class="arc-stat-lbl">WALLETS</div></div>
        <div class="arc-stat"><div class="arc-stat-val" style="color:var(--gold)">942</div><div class="arc-stat-lbl">NFTs MINTED</div></div>
        <div class="arc-stat"><div class="arc-stat-val" style="color:#a78bfa">$2.4M</div><div class="arc-stat-lbl">USDC LOCKED</div></div>
        <div class="arc-stat"><div class="arc-stat-val" style="color:var(--cyan)">~0.3s</div><div class="arc-stat-lbl">BLOCK TIME</div></div>
        <div class="arc-stat"><div class="arc-stat-val" style="color:var(--orange)">99.9%</div><div class="arc-stat-lbl">UPTIME</div></div>
      </div>
    </div>

    <div class="card">
      <div class="card-title">üó∫Ô∏è Arc Roadmap</div>
      <div class="card-sub">The journey from testnet to mainnet</div>
      <div class="roadmap">
        <div class="roadmap-item"><div class="roadmap-dot done"></div><div class="roadmap-phase">PHASE 1 ‚Äî COMPLETE</div><div class="roadmap-title">Testnet Launch</div><div class="roadmap-desc">Core infrastructure deployed. USDC transfers, wallet connectivity and foundational smart contracts live on Arc Testnet.</div></div>
        <div class="roadmap-item"><div class="roadmap-dot now"></div><div class="roadmap-phase">PHASE 2 ‚Äî ACTIVE ‚Üê YOU ARE HERE</div><div class="roadmap-title">DeFi Primitives & NFT Marketplace</div><div class="roadmap-desc">Full DEX swaps, NFT marketplace with community posting, USDC yield locking, and the builder fee system powering protocol sustainability.</div></div>
        <div class="roadmap-item"><div class="roadmap-dot"></div><div class="roadmap-phase">PHASE 3 ‚Äî UPCOMING</div><div class="roadmap-title">Governance & ARC Token</div><div class="roadmap-desc">ARC token launch, on-chain governance, protocol staking rewards, and a community DAO treasury.</div></div>
        <div class="roadmap-item"><div class="roadmap-dot"></div><div class="roadmap-phase">PHASE 4 ‚Äî PLANNED</div><div class="roadmap-title">Mainnet Migration</div><div class="roadmap-desc">Audited mainnet contracts, cross-chain bridges, real-value USDC integration, and institutional partnership layer.</div></div>
      </div>
    </div>

    <div class="card" style="border-color:rgba(59,130,246,.3);text-align:center">
      <div style="font-size:2rem;margin-bottom:.8rem">üîó</div>
      <div class="card-title" style="justify-content:center">Fee Architecture</div>
      <div style="font-size:.85rem;color:var(--text2);line-height:1.7;margin-bottom:1rem">Every transaction on Arc Protocol carries a flat <strong style="color:#a78bfa">1 USDC platform fee</strong> ‚Äî automatically deducted and routed to the builder wallet, funding ongoing protocol development.</div>
      <div style="background:var(--surface2);border:1px solid var(--border2);border-radius:10px;padding:12px;font-family:'DM Mono',monospace;font-size:.72rem;color:#a78bfa;word-break:break-all">Builder Wallet: 0xa28f6f51a208a2ea67fcba9d8f8d4f17c0c21df7</div>
      <div style="margin-top:.8rem;font-size:.78rem;color:var(--text3)">Built by <a href="https://x.com/Bash06809279101" target="_blank" style="color:#60a5fa;text-decoration:none">@Bash06809279101</a></div>
    </div>
  </div>

  <!-- TRANSFER -->
  <div id="panel-transfer" class="panel">
    <div class="card">
      <div class="card-title">üí∏ Transfer USDC</div>
      <div class="card-sub">Send USDC to any wallet on Arc Testnet</div>
      <div class="fee-notice">‚ö° 1 USDC platform fee per transaction ‚Äî auto deducted</div>
      <div class="form-row"><label>RECIPIENT WALLET ADDRESS</label><input type="text" id="transfer-to" placeholder="0x..."></div>
      <div class="form-row"><label>AMOUNT TO SEND (USDC)</label><input type="number" id="transfer-amount" placeholder="0.00" min="0" step="0.01"></div>
      <div class="form-row" style="margin-bottom:1.5rem"><label>AVAILABLE BALANCE</label><div id="avail-transfer" style="font-size:1rem;font-weight:700;color:var(--cyan);font-family:'DM Mono',monospace">Connect wallet to view</div></div>
      <button class="btn-primary" onclick="executeTransfer()">Send USDC ‚Üí</button>
    </div>
  </div>

  <!-- SWAP -->
  <div id="panel-swap" class="panel">
    <div class="card">
      <div class="card-title">üîÑ Token Swap</div>
      <div class="card-sub">Swap tokens using Arc's built-in DEX</div>
      <div class="fee-notice">‚ö° 1 USDC platform fee per swap</div>
      <div class="swap-box">
        <label>FROM</label>
        <div class="swap-input-row">
          <input type="number" id="swap-from-amt" placeholder="0.00" oninput="calcSwap()">
          <select class="token-badge" id="swap-from-tok" onchange="calcSwap()">
            <option>USDC</option><option>ETH</option><option>WBTC</option><option>ARB</option>
          </select>
        </div>
      </div>
      <div class="swap-flip" onclick="flipSwap()">‚áÖ</div>
      <div class="swap-box">
        <label>TO (ESTIMATED)</label>
        <div class="swap-input-row">
          <input type="number" id="swap-to-amt" placeholder="0.00" readonly>
          <select class="token-badge" id="swap-to-tok" onchange="calcSwap()">
            <option>ETH</option><option>USDC</option><option>WBTC</option><option>ARB</option>
          </select>
        </div>
      </div>
      <div class="swap-rate" id="swap-rate-txt" style="margin-top:.7rem">Enter an amount to see the rate</div>
      <button class="btn-primary" onclick="executeSwap()">Swap Now ‚Üí</button>
    </div>
  </div>

  <!-- NFT MARKETPLACE -->
  <div id="panel-nft" class="panel">
    <div class="card">
      <div class="card-title">üñºÔ∏è NFT Marketplace</div>
      <div class="card-sub">Mint, buy, sell, transfer and post your own NFTs to the community</div>
      <div class="fee-notice">‚ö° 1 USDC platform fee for every NFT action (mint, buy, list, transfer)</div>
      <div class="nft-tabs">
        <button class="nft-tab active" onclick="switchNFTTab('all')">üåç All NFTs</button>
        <button class="nft-tab" onclick="switchNFTTab('mine')">üë§ My Collection</button>
        <button class="nft-tab" onclick="switchNFTTab('listed')">üè™ For Sale</button>
        <button class="nft-tab" onclick="switchNFTTab('post')">‚ûï Post / Mint</button>
      </div>
      <div id="nft-view-all"><div class="nft-grid" id="nft-grid-all"></div></div>
      <div id="nft-view-mine" style="display:none">
        <div style="margin-bottom:1rem;font-size:.82rem;color:var(--text3);font-family:'DM Mono',monospace">Click an NFT to select it ‚Äî then transfer or list it.</div>
        <div class="nft-grid" id="nft-grid-mine"></div>
        <div id="nft-transfer-section" style="display:none;margin-top:1rem;border-top:1px solid var(--border);padding-top:1.2rem">
          <div class="form-row"><label>TRANSFER TO ADDRESS</label><input type="text" id="nft-xfer-to" placeholder="0x..."></div>
          <div style="display:flex;gap:.8rem">
            <button class="btn-sm" onclick="transferNFT()" style="flex:1;padding:12px">Transfer NFT ‚Üí</button>
            <button class="btn-outline" onclick="openListModal()" style="flex:1;padding:12px">List for Sale üè™</button>
          </div>
        </div>
      </div>
      <div id="nft-view-listed" style="display:none"><div class="nft-grid" id="nft-grid-listed"></div></div>
      <div id="nft-view-post" style="display:none">
        <div class="post-nft-form">
          <h4>üé® Create & Post Your NFT</h4>
          <div class="form-2col">
            <div class="form-row" style="margin-bottom:0"><label>NFT NAME</label><input type="text" id="mint-name" placeholder="My Arc NFT"></div>
            <div class="form-row" style="margin-bottom:0"><label>COLLECTION</label><input type="text" id="mint-collection" placeholder="Arc Originals"></div>
          </div>
          <div class="form-row" style="margin-top:.8rem"><label>DESCRIPTION</label><textarea id="mint-desc" placeholder="Describe your NFT..."></textarea></div>
          <div class="form-row"><label>CHOOSE YOUR NFT ART</label><div class="emoji-picker" id="emoji-picker"></div></div>
          <div class="form-2col">
            <div class="form-row" style="margin-bottom:0"><label>LIST FOR SALE?</label>
              <select id="mint-list"><option value="no">No ‚Äî Keep in wallet</option><option value="yes">Yes ‚Äî Post to marketplace</option></select>
            </div>
            <div class="form-row" style="margin-bottom:0"><label>LISTING PRICE (USDC)</label><input type="number" id="mint-price" placeholder="10.00" min="0" step="0.01"></div>
          </div>
          <div style="margin-top:1.2rem"><button class="btn-primary" onclick="mintNFT()">Mint NFT (+1 USDC fee)</button></div>
        </div>
      </div>
    </div>
  </div>

  <!-- LOCK -->
  <div id="panel-lock" class="panel">
    <div class="card">
      <div class="card-title">üîí Lock & Save USDC</div>
      <div class="card-sub">Lock USDC for a fixed period and earn yield rewards</div>
      <div class="fee-notice">‚ö° 1 USDC platform fee on lock initiation</div>
      <div class="form-row"><label>AMOUNT TO LOCK (USDC)</label><input type="number" id="lock-amount" placeholder="0.00" oninput="updateLockPreview()"></div>
      <div class="form-row"><label>SELECT LOCK PERIOD</label>
        <div class="period-grid">
          <div class="period-btn" onclick="selectPeriod(this,'7',0.5)">7 Days<br><span class="apy">0.5% APY</span></div>
          <div class="period-btn" onclick="selectPeriod(this,'30',2)">30 Days<br><span class="apy">2% APY</span></div>
          <div class="period-btn" onclick="selectPeriod(this,'90',6)">90 Days<br><span class="apy">6% APY</span></div>
          <div class="period-btn" onclick="selectPeriod(this,'365',15)">1 Year<br><span class="apy">15% APY</span></div>
        </div>
      </div>
      <div class="lock-preview">
        <div class="lock-row"><span>Lock Amount</span><span id="lp-amount">‚Äî</span></div>
        <div class="lock-row"><span>Period & APY</span><span id="lp-period">‚Äî</span></div>
        <div class="lock-row"><span>Est. Reward</span><span id="lp-reward">‚Äî</span></div>
        <div class="lock-row"><span>Unlock Date</span><span id="lp-unlock">‚Äî</span></div>
        <div class="lock-row"><span>Platform Fee</span><span class="confirm-fee">1 USDC</span></div>
      </div>
      <button class="btn-primary" onclick="lockUSDC()">Lock USDC üîí</button>
    </div>
    <div class="card">
      <div class="card-title">üì¶ Active Locks</div>
      <div id="active-locks"><div style="color:var(--text3);font-family:'DM Mono',monospace;font-size:.8rem">No active locks. Connect wallet to view.</div></div>
    </div>
  </div>

  <!-- DASHBOARD -->
  <div id="panel-dashboard" class="panel">
    <div class="card">
      <div class="card-title">üìä Wallet Overview</div>
      <div class="card-sub">Your Arc Testnet activity at a glance</div>
      <div class="stats-grid">
        <div class="stat-card" style="--bar:#60a5fa;--sc:#60a5fa"><div class="stat-label">USDC BALANCE</div><div class="stat-value" id="dash-usdc">‚Äî</div><div class="stat-sub">available</div></div>
        <div class="stat-card" style="--bar:#a78bfa;--sc:#a78bfa"><div class="stat-label">LOCKED USDC</div><div class="stat-value" id="dash-locked">‚Äî</div><div class="stat-sub">in yield positions</div></div>
        <div class="stat-card" style="--bar:var(--green);--sc:var(--green)"><div class="stat-label">TOTAL TXs</div><div class="stat-value" id="dash-tx">‚Äî</div><div class="stat-sub">on Arc Testnet</div></div>
        <div class="stat-card" style="--bar:var(--gold);--sc:var(--gold)"><div class="stat-label">NFTs OWNED</div><div class="stat-value" id="dash-nfts">‚Äî</div><div class="stat-sub">in wallet</div></div>
        <div class="stat-card" style="--bar:var(--cyan);--sc:var(--cyan)"><div class="stat-label">FEES PAID</div><div class="stat-value" id="dash-fees">‚Äî</div><div class="stat-sub">USDC to builder</div></div>
        <div class="stat-card" style="--bar:var(--orange);--sc:var(--orange)"><div class="stat-label">USDC PRICE</div><div class="stat-value">$1.00</div><div class="stat-sub">stable peg</div></div>
      </div>
    </div>
    <div class="card">
      <div class="card-title">üìú Transaction History</div>
      <div id="tx-log"><div style="color:var(--text3);font-family:'DM Mono',monospace;font-size:.8rem">No transactions yet. Connect your wallet to get started.</div></div>
    </div>
  </div>
</main>

<div class="builder-bar">
  Built by <a href="https://x.com/Bash06809279101" target="_blank">@Bash06809279101</a> &nbsp;¬∑&nbsp; ARC Protocol Testnet &nbsp;¬∑&nbsp; Fee wallet: 0xa28f...df7
</div>

<!-- CONNECT MODAL -->
<div class="modal-overlay" id="connectModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('connectModal')">‚úï</button>
    <h3>Connect Wallet</h3>
    <p style="margin-bottom:1.3rem">Connect to Arc Protocol Testnet</p>
    <div class="wallet-option" onclick="connectWallet('MetaMask')"><div class="wallet-option-icon">ü¶ä</div><div><div>MetaMask</div><div class="wallet-option-sub">Browser extension wallet</div></div></div>
    <div class="wallet-option" onclick="connectWallet('WalletConnect')"><div class="wallet-option-icon">üîó</div><div><div>WalletConnect</div><div class="wallet-option-sub">QR code ‚Äî any mobile wallet</div></div></div>
    <div class="wallet-option" onclick="connectWallet('Coinbase Wallet')"><div class="wallet-option-icon">üîµ</div><div><div>Coinbase Wallet</div><div class="wallet-option-sub">Simple setup for beginners</div></div></div>
    <div class="wallet-option" onclick="connectWallet('Rabby')"><div class="wallet-option-icon">üê∞</div><div><div>Rabby Wallet</div><div class="wallet-option-sub">Multi-chain smart wallet</div></div></div>
  </div>
</div>

<!-- CONFIRM MODAL -->
<div class="modal-overlay" id="confirmModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('confirmModal')">‚úï</button>
    <h3 id="confirm-title">Confirm</h3>
    <div id="confirm-body"></div>
    <div class="modal-btns">
      <button class="btn-cancel" onclick="closeModal('confirmModal')">Cancel</button>
      <button class="btn-primary" style="flex:1" id="confirm-ok">Confirm</button>
    </div>
  </div>
</div>

<!-- LIST NFT MODAL -->
<div class="modal-overlay" id="listModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('listModal')">‚úï</button>
    <h3>üè™ List NFT for Sale</h3>
    <p style="margin-bottom:1rem">Set a price and post your NFT to the Arc marketplace.</p>
    <div class="form-row"><label>LISTING PRICE (USDC)</label><input type="number" id="list-price" placeholder="10.00" min="0" step="0.01"></div>
    <div class="fee-notice" style="margin-top:0">‚ö° 1 USDC listing fee applies</div>
    <div class="modal-btns">
      <button class="btn-cancel" onclick="closeModal('listModal')">Cancel</button>
      <button class="btn-primary" style="flex:1" onclick="listNFT()">Post to Marketplace</button>
    </div>
  </div>
</div>

<div id="toast-wrap"></div>

<script>
const FEE_WALLET='0xa28f6f51a208a2ea67fcba9d8f8d4f17c0c21df7', FEE=1;
const RATES={USDC:{ETH:.000385,WBTC:.0000155,ARB:1.42,USDC:1},ETH:{USDC:2597,WBTC:.04025,ARB:3689,ETH:1},WBTC:{USDC:64500,ETH:24.8,ARB:91550,WBTC:1},ARB:{USDC:.704,ETH:.000271,WBTC:.0000109,ARB:1}};
const EMOJIS=['üöÄ','üíé','üåä','üî•','‚ö°','ü¶ã','üé≠','üé®','üëæ','üêâ','ü¶Ñ','üåô','‚≠ê','üèÜ','üéØ','ü¶ä','üê∫','üåà','üí´','üé™','üîÆ','üå∫','üçÄ','üé∏','ü§ñ','ü¶Ö','üê¨','üèîÔ∏è','üí•','üåü','üéÜ','ü¶Å','üêØ','üåä','üéã','üè∫','ü¶©','üêô','üéÉ','üåÄ'];
const BGGRADES=['linear-gradient(135deg,#1e3a5f,#0f2240)','linear-gradient(135deg,#1a1f3c,#0d1224)','linear-gradient(135deg,#1f2d1a,#0d1a0a)','linear-gradient(135deg,#2d1a1a,#1a0a0a)','linear-gradient(135deg,#1a1a2d,#0a0a1a)','linear-gradient(135deg,#2d261a,#1a150a)','linear-gradient(135deg,#0d2233,#071525)','linear-gradient(135deg,#1f1a2d,#0f0a1a)'];

const DEFAULT_NFTS=[
  {id:1,name:'Arc Genesis',emoji:'üåä',creator:'arc.eth',price:50,listed:true,owned:false,collection:'Genesis'},
  {id:2,name:'Protocol Punk #1',emoji:'üëæ',creator:'punk.eth',price:120,listed:true,owned:false,collection:'Punks'},
  {id:3,name:'Chain Flame',emoji:'üî•',creator:'flame.eth',price:35,listed:true,owned:false,collection:'Elements'},
  {id:4,name:'Void Dragon',emoji:'üêâ',creator:'void.eth',price:200,listed:true,owned:false,collection:'Legends'},
  {id:5,name:'Nebula Star',emoji:'‚≠ê',creator:'neb.eth',price:18,listed:true,owned:false,collection:'Cosmos'},
  {id:6,name:'Arc Unicorn',emoji:'ü¶Ñ',creator:'magic.eth',price:88,listed:true,owned:false,collection:'Rare'},
  {id:7,name:'Thunder Eagle',emoji:'ü¶Ö',creator:'sky.eth',price:45,listed:true,owned:false,collection:'Wildlife'},
  {id:8,name:'Cyber Fox',emoji:'ü¶ä',creator:'cyber.eth',price:67,listed:false,owned:true,collection:'Cyber'},
  {id:9,name:'Moon Rock',emoji:'üåô',creator:'luna.eth',price:30,listed:true,owned:false,collection:'Cosmos'},
  {id:10,name:'Neon Robot',emoji:'ü§ñ',creator:'dex.eth',price:95,listed:true,owned:false,collection:'Cyber'},
  {id:11,name:'Rainbow Burst',emoji:'üåà',creator:'color.eth',price:22,listed:true,owned:false,collection:'Elements'},
  {id:12,name:'Ocean Spirit',emoji:'üê¨',creator:'wave.eth',price:55,listed:false,owned:true,collection:'Wildlife'},
  {id:13,name:'Crystal Trophy',emoji:'üèÜ',creator:'win.eth',price:150,listed:true,owned:false,collection:'Rare'},
  {id:14,name:'Magic Orb',emoji:'üîÆ',creator:'spell.eth',price:80,listed:true,owned:false,collection:'Legends'},
  {id:15,name:'Arc Rocket',emoji:'üöÄ',creator:'launch.eth',price:110,listed:true,owned:false,collection:'Genesis'},
  {id:16,name:'Diamond Gem',emoji:'üíé',creator:'gem.eth',price:300,listed:true,owned:false,collection:'Rare'},
  {id:17,name:'Fire Phoenix',emoji:'ü¶ã',creator:'phx.eth',price:175,listed:true,owned:false,collection:'Legends'},
  {id:18,name:'Storm Wave',emoji:'üåÄ',creator:'storm.eth',price:42,listed:true,owned:false,collection:'Elements'},
  {id:19,name:'Gold Lion',emoji:'ü¶Å',creator:'roar.eth',price:220,listed:true,owned:false,collection:'Wildlife'},
  {id:20,name:'Cosmic Star',emoji:'üåü',creator:'cosmos.eth',price:65,listed:true,owned:false,collection:'Cosmos'},
];

let state={connected:false,address:'',walletType:'',usdc:1000,locked:0,txCount:0,feesPaid:0,nfts:JSON.parse(JSON.stringify(DEFAULT_NFTS)),locks:[],history:[],selectedNFT:null,lockPeriod:null,lockAPY:null,selectedEmoji:'üöÄ',nftSubTab:'all'};

function switchTab(tab){
  document.querySelectorAll('.tab-btn').forEach(b=>{
    const txt=b.textContent.toLowerCase();
    b.classList.toggle('active',(tab==='overview'&&txt.includes('overview'))||(tab==='transfer'&&txt.includes('transfer'))||(tab==='swap'&&txt.includes('swap'))||(tab==='nft'&&txt.includes('nft'))||(tab==='lock'&&txt.includes('lock'))||(tab==='dashboard'&&txt.includes('dashboard')));
  });
  document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
  document.getElementById('panel-'+tab).classList.add('active');
  if(tab==='dashboard')refreshDashboard();
  if(tab==='nft')renderAll();
}
function openConnectModal(){document.getElementById('connectModal').classList.add('open')}
function closeModal(id){document.getElementById(id).classList.remove('open')}
function toast(title,msg,type='info',hash=''){
  const icons={success:'‚úÖ',error:'‚ùå',info:'üí°'};
  const el=document.createElement('div');
  el.className='toast '+type;
  el.innerHTML=`<span style="font-size:1.1rem">${icons[type]}</span><div class="toast-body"><div class="toast-title">${title}</div><div class="toast-msg">${msg}</div>${hash?`<div class="toast-hash">TX: ${hash.slice(0,22)}...</div>`:''}</div>`;
  document.getElementById('toast-wrap').prepend(el);
  setTimeout(()=>el.remove(),4500);
}
function fakeHash(){return'0x'+[...Array(64)].map(()=>Math.floor(Math.random()*16).toString(16)).join('')}
function fakeAddr(){return'0x'+[...Array(40)].map(()=>Math.floor(Math.random()*16).toString(16)).join('')}
function short(a){return a.slice(0,6)+'...'+a.slice(-4)}
function need(){if(!state.connected){toast('Not Connected','Please connect your wallet first.','error');return false}return true}

function connectWallet(type){
  closeModal('connectModal');
  state.connected=true;state.walletType=type;state.address=fakeAddr();
  document.getElementById('connectBtn').textContent=short(state.address);
  document.getElementById('walletAddr').textContent=state.address;
  document.getElementById('walletType').textContent=type;
  document.getElementById('wallet-status').classList.add('active');
  updateBal();
  toast('Connected!','Wallet connected via '+type,'success');
}
function updateBal(){
  document.getElementById('usdcBalance').textContent=state.usdc.toFixed(2);
  document.getElementById('lockedBal').textContent=state.locked.toFixed(2);
  document.getElementById('txCountBal').textContent=state.txCount;
  document.getElementById('avail-transfer').textContent=state.usdc.toFixed(2)+' USDC';
}
function chargeFee(){state.usdc-=FEE;state.feesPaid+=FEE;state.txCount++;return fakeHash()}
function addHistory(type,desc,hash){
  const icons={transfer:'üí∏',swap:'üîÑ',nft:'üñºÔ∏è',lock:'üîí'};
  state.history.unshift({type,desc,hash,icon:icons[type]||'üìù',time:new Date().toLocaleTimeString()});
  if(state.history.length>50)state.history.pop();
  renderHistory();
}
function renderHistory(){
  const el=document.getElementById('tx-log');
  if(!state.history.length){el.innerHTML='<div style="color:var(--text3);font-family:\'DM Mono\',monospace;font-size:.8rem">No transactions yet.</div>';return}
  el.innerHTML=state.history.slice(0,25).map(h=>`
    <div class="tx-item">
      <div class="tx-left">
        <div class="tx-icon ${h.type}">${h.icon}</div>
        <div><div class="tx-desc">${h.desc}</div><div class="tx-hash">${h.hash.slice(0,28)}... ¬∑ ${h.time}</div></div>
      </div>
      <div style="text-align:right"><div class="tx-status">‚úì Confirmed</div><div style="font-size:.7rem;color:var(--text3)">${h.type.toUpperCase()}</div></div>
    </div>`).join('');
}

let _cb=null;
function showConfirm(title,body,cb){
  document.getElementById('confirm-title').textContent=title;
  document.getElementById('confirm-body').innerHTML=body;
  _cb=cb;
  document.getElementById('confirm-ok').onclick=()=>{closeModal('confirmModal');_cb&&_cb();_cb=null};
  document.getElementById('confirmModal').classList.add('open');
}

function executeTransfer(){
  if(!need())return;
  const to=document.getElementById('transfer-to').value.trim();
  const amt=parseFloat(document.getElementById('transfer-amount').value);
  if(!to.startsWith('0x')){toast('Invalid Address','Enter a valid 0x address.','error');return}
  if(!amt||amt<=0){toast('Invalid Amount','Enter a valid amount.','error');return}
  if(state.usdc<amt+FEE){toast('Insufficient USDC','Need '+(amt+FEE)+' USDC (amount + 1 fee).','error');return}
  showConfirm('üí∏ Confirm Transfer',`<div class="confirm-detail"><div class="cd-row"><span>To</span><span class="cd-val">${short(to)}</span></div><div class="cd-row"><span>Amount</span><span class="cd-val">${amt} USDC</span></div><div class="cd-row"><span>Platform Fee</span><span class="confirm-fee">1 USDC ‚Üí builder</span></div><div class="cd-row"><span>Total</span><span class="cd-val">${(amt+FEE).toFixed(2)} USDC</span></div></div>`,()=>{
    state.usdc-=amt;const h=chargeFee();const txh=fakeHash();
    addHistory('transfer',amt+' USDC ‚Üí '+short(to),txh);
    updateBal();
    document.getElementById('transfer-to').value='';document.getElementById('transfer-amount').value='';
    toast('Sent!',amt+' USDC sent to '+short(to),'success',txh);
  });
}

function calcSwap(){
  const f=document.getElementById('swap-from-tok').value,t=document.getElementById('swap-to-tok').value;
  const a=parseFloat(document.getElementById('swap-from-amt').value)||0;
  if(f===t){document.getElementById('swap-to-amt').value=a;return}
  const rate=RATES[f]?.[t]||1;
  document.getElementById('swap-to-amt').value=(a*rate).toFixed(6);
  document.getElementById('swap-rate-txt').textContent='1 '+f+' = '+rate+' '+t+' ¬∑ Simulated rate';
}
function flipSwap(){
  const ft=document.getElementById('swap-from-tok'),tt=document.getElementById('swap-to-tok');
  const fa=document.getElementById('swap-from-amt'),ta=document.getElementById('swap-to-amt');
  [ft.value,tt.value]=[tt.value,ft.value];fa.value=ta.value;calcSwap();
}
function executeSwap(){
  if(!need())return;
  const f=document.getElementById('swap-from-tok').value,t=document.getElementById('swap-to-tok').value;
  const a=parseFloat(document.getElementById('swap-from-amt').value);
  const o=document.getElementById('swap-to-amt').value;
  if(!a||a<=0){toast('Invalid Amount','Enter an amount.','error');return}
  if(f==='USDC'&&state.usdc<a+FEE){toast('Insufficient USDC','Need '+(a+FEE)+' USDC.','error');return}
  showConfirm('üîÑ Confirm Swap',`<div class="confirm-detail"><div class="cd-row"><span>From</span><span class="cd-val">${a} ${f}</span></div><div class="cd-row"><span>To</span><span class="cd-val">‚âà ${o} ${t}</span></div><div class="cd-row"><span>Platform Fee</span><span class="confirm-fee">1 USDC ‚Üí builder</span></div></div>`,()=>{
    if(f==='USDC')state.usdc-=a;const h=chargeFee();const txh=fakeHash();
    addHistory('swap',a+' '+f+' ‚Üí '+o+' '+t,txh);
    updateBal();document.getElementById('swap-from-amt').value='';document.getElementById('swap-to-amt').value='';
    toast('Swapped!',a+' '+f+' ‚Üí '+o+' '+t,'success',txh);
  });
}

function switchNFTTab(tab){
  state.nftSubTab=tab;
  document.querySelectorAll('.nft-tab').forEach(b=>b.classList.toggle('active',(tab==='all'&&b.textContent.includes('All'))||(tab==='mine'&&b.textContent.includes('My'))||(tab==='listed'&&b.textContent.includes('Sale'))||(tab==='post'&&b.textContent.includes('Post'))));
  ['all','mine','listed','post'].forEach(v=>document.getElementById('nft-view-'+v).style.display=v===tab?'':'none');
  renderAll();
}
function renderAll(){
  renderGrid('nft-grid-all',state.nfts,'all');
  renderGrid('nft-grid-mine',state.nfts.filter(n=>n.owned),'mine');
  renderGrid('nft-grid-listed',state.nfts.filter(n=>n.listed),'listed');
}
function renderGrid(id,nfts,mode){
  const el=document.getElementById(id);if(!el)return;
  if(!nfts.length){el.innerHTML=`<div style="color:var(--text3);font-family:'DM Mono',monospace;font-size:.82rem;grid-column:1/-1;padding:1rem 0">${mode==='mine'?'No NFTs in your wallet.':mode==='listed'?'No NFTs listed for sale.':'No NFTs found.'}</div>`;return}
  el.innerHTML=nfts.map((n,i)=>{
    const sel=state.selectedNFT===n.id;
    const bg=BGGRADES[i%BGGRADES.length];
    return`<div class="nft-card ${sel?'selected':''} ${n.listed?'listed-card':''}" onclick="selectNFT(${n.id})">
      <div class="nft-img" style="background:${bg}">
        ${n.listed?`<div class="nft-badge listed">FOR SALE</div>`:n.owned?`<div class="nft-badge owned">OWNED</div>`:''}
        <div class="nft-img-emoji">${n.emoji}</div>
      </div>
      <div class="nft-info">
        <div class="nft-name">${n.name}</div>
        <div class="nft-creator">by ${n.creator||'you.eth'}</div>
        <div class="nft-coll">${n.collection}</div>
        ${n.listed?`<div class="nft-price">üí∞ ${n.price} USDC</div>`:''}
        ${n.listed&&!n.owned?`<div class="nft-actions"><button class="btn-sm" onclick="event.stopPropagation();buyNFT(${n.id})">Buy Now</button></div>`:''}
        ${n.owned&&n.listed?`<div style="font-size:.65rem;color:var(--gold);font-family:'DM Mono',monospace;margin-top:6px">Listed @ ${n.price} USDC</div>`:''}
      </div>
    </div>`;
  }).join('');
}
function selectNFT(id){
  state.selectedNFT=state.selectedNFT===id?null:id;
  renderAll();
  const s=document.getElementById('nft-transfer-section');
  if(s)s.style.display=state.selectedNFT?'block':'none';
}
function buyNFT(id){
  if(!need())return;
  const n=state.nfts.find(x=>x.id===id);if(!n)return;
  if(state.usdc<n.price+FEE){toast('Insufficient USDC','Need '+(n.price+FEE)+' USDC.','error');return}
  showConfirm('üõí Buy NFT',`<div class="confirm-detail"><div class="cd-row"><span>NFT</span><span class="cd-val">${n.emoji} ${n.name}</span></div><div class="cd-row"><span>Price</span><span class="cd-val">${n.price} USDC</span></div><div class="cd-row"><span>Platform Fee</span><span class="confirm-fee">1 USDC ‚Üí builder</span></div><div class="cd-row"><span>Total</span><span class="cd-val">${n.price+FEE} USDC</span></div></div>`,()=>{
    state.usdc-=n.price;chargeFee();n.owned=true;n.listed=false;n.creator='you.eth';
    const txh=fakeHash();addHistory('nft','Bought '+n.emoji+' '+n.name+' for '+n.price+' USDC',txh);
    updateBal();renderAll();toast('NFT Purchased!','You now own '+n.name,'success',txh);
  });
}
function initEmojiPicker(){
  const p=document.getElementById('emoji-picker');if(!p)return;
  p.innerHTML=EMOJIS.map(e=>`<div class="emoji-opt ${state.selectedEmoji===e?'selected':''}" onclick="selectEmoji('${e}')">${e}</div>`).join('');
}
function selectEmoji(e){state.selectedEmoji=e;document.querySelectorAll('.emoji-opt').forEach(el=>el.classList.toggle('selected',el.textContent===e))}
function mintNFT(){
  if(!need())return;
  if(state.usdc<FEE){toast('Insufficient USDC','1 USDC fee required.','error');return}
  const name=document.getElementById('mint-name').value.trim()||'Arc NFT';
  const coll=document.getElementById('mint-collection').value.trim()||'My Collection';
  const listIt=document.getElementById('mint-list').value==='yes';
  const price=parseFloat(document.getElementById('mint-price').value)||10;
  const emoji=state.selectedEmoji;
  const nft={id:Date.now(),name,emoji,creator:'you.eth',collection:coll,price:listIt?price:0,listed:listIt,owned:true};
  state.nfts.unshift(nft);chargeFee();const txh=fakeHash();
  addHistory('nft','Minted '+emoji+' '+name+(listIt?' @ '+price+' USDC':''),txh);
  updateBal();renderAll();
  document.getElementById('mint-name').value='';document.getElementById('mint-desc').value='';
  toast('NFT Minted!',name+(listIt?' listed for '+price+' USDC':''+' created'),'success',txh);
  if(listIt)switchNFTTab('listed');else switchNFTTab('mine');
}
function transferNFT(){
  if(!need())return;
  const to=document.getElementById('nft-xfer-to').value.trim();
  if(!to.startsWith('0x')){toast('Invalid Address','Enter a valid 0x address.','error');return}
  if(!state.selectedNFT){toast('No NFT Selected','Select an NFT to transfer.','error');return}
  if(state.usdc<FEE){toast('Insufficient USDC','1 USDC fee required.','error');return}
  const n=state.nfts.find(x=>x.id===state.selectedNFT);
  showConfirm('üì§ Transfer NFT',`<div class="confirm-detail"><div class="cd-row"><span>NFT</span><span class="cd-val">${n.emoji} ${n.name}</span></div><div class="cd-row"><span>To</span><span class="cd-val">${short(to)}</span></div><div class="cd-row"><span>Platform Fee</span><span class="confirm-fee">1 USDC ‚Üí builder</span></div></div>`,()=>{
    chargeFee();const txh=fakeHash();addHistory('nft','Transferred '+n.emoji+' '+n.name+' ‚Üí '+short(to),txh);
    n.owned=false;n.listed=false;n.creator=short(to);state.selectedNFT=null;
    updateBal();renderAll();document.getElementById('nft-xfer-to').value='';document.getElementById('nft-transfer-section').style.display='none';
    toast('Transferred!',n.name+' sent to '+short(to),'success',txh);
  });
}
function openListModal(){if(!state.selectedNFT){toast('No NFT Selected','Select an NFT first.','error');return}document.getElementById('list-price').value='';document.getElementById('listModal').classList.add('open')}
function listNFT(){
  if(!need())return;
  const price=parseFloat(document.getElementById('list-price').value);
  if(!price||price<=0){toast('Invalid Price','Enter a price above 0 USDC.','error');return}
  if(state.usdc<FEE){toast('Insufficient USDC','1 USDC listing fee required.','error');return}
  const n=state.nfts.find(x=>x.id===state.selectedNFT);if(!n)return;
  closeModal('listModal');chargeFee();const txh=fakeHash();
  n.listed=true;n.price=price;addHistory('nft','Listed '+n.emoji+' '+n.name+' for '+price+' USDC',txh);
  state.selectedNFT=null;updateBal();renderAll();document.getElementById('nft-transfer-section').style.display='none';
  toast('Listed!',n.name+' posted for '+price+' USDC','success',txh);switchNFTTab('listed');
}

function selectPeriod(el,days,apy){document.querySelectorAll('.period-btn').forEach(b=>b.classList.remove('selected'));el.classList.add('selected');state.lockPeriod=days;state.lockAPY=apy;updateLockPreview()}
function updateLockPreview(){
  const a=parseFloat(document.getElementById('lock-amount').value)||0;
  if(!state.lockPeriod||!a)return;
  const d=parseInt(state.lockPeriod),r=(a*state.lockAPY/100*d/365).toFixed(4);
  document.getElementById('lp-amount').textContent=a+' USDC';
  document.getElementById('lp-period').textContent=d+' days @ '+state.lockAPY+'% APY';
  document.getElementById('lp-reward').textContent='+'+r+' USDC';
  document.getElementById('lp-unlock').textContent=new Date(Date.now()+d*86400000).toLocaleDateString();
}
function lockUSDC(){
  if(!need())return;
  const a=parseFloat(document.getElementById('lock-amount').value);
  if(!a||a<=0){toast('Invalid Amount','Enter USDC to lock.','error');return}
  if(!state.lockPeriod){toast('No Period','Select a lock period.','error');return}
  if(state.usdc<a+FEE){toast('Insufficient USDC','Need '+(a+FEE)+' USDC.','error');return}
  const d=parseInt(state.lockPeriod),r=(a*state.lockAPY/100*d/365).toFixed(4);
  const unlockDate=new Date(Date.now()+d*86400000);
  showConfirm('üîí Confirm Lock',`<div class="confirm-detail"><div class="cd-row"><span>Amount</span><span class="cd-val">${a} USDC</span></div><div class="cd-row"><span>Period</span><span class="cd-val">${d}d @ ${state.lockAPY}% APY</span></div><div class="cd-row"><span>Est. Reward</span><span class="cd-val">+${r} USDC</span></div><div class="cd-row"><span>Unlock</span><span class="cd-val">${unlockDate.toLocaleDateString()}</span></div><div class="cd-row"><span>Fee</span><span class="confirm-fee">1 USDC ‚Üí builder</span></div></div>`,()=>{
    state.usdc-=a;state.locked+=a;chargeFee();const txh=fakeHash();
    state.locks.push({id:Date.now(),amount:a,days:d,apy:state.lockAPY,reward:r,unlockDate,txh});
    addHistory('lock','Locked '+a+' USDC for '+d+' days',txh);updateBal();renderLocks();
    document.getElementById('lock-amount').value='';
    toast('Locked!',a+' USDC locked for '+d+' days','success',txh);
  });
}
function renderLocks(){
  const el=document.getElementById('active-locks');
  if(!state.locks.length){el.innerHTML='<div style="color:var(--text3);font-family:\'DM Mono\',monospace;font-size:.8rem">No active locks.</div>';return}
  el.innerHTML=state.locks.map(l=>{
    const ok=new Date()>=l.unlockDate;
    return`<div class="lock-item"><div><div class="lock-amount">${l.amount} USDC</div><div class="lock-time">${l.days}d @ ${l.apy}% APY ¬∑ Est. +${l.reward} USDC</div><div class="lock-time" style="color:${ok?'var(--green)':'var(--text3)'}">${ok?'üîì Ready to unlock!':'üîí Unlocks '+l.unlockDate.toLocaleDateString()}</div></div><button class="unlock-btn" ${ok?'':'disabled'} onclick="unlockUSDC(${l.id})">${ok?'Unlock Now':'Locked'}</button></div>`;
  }).join('');
}
function unlockUSDC(id){
  const l=state.locks.find(x=>x.id===id);if(!l)return;
  state.usdc+=l.amount+parseFloat(l.reward);state.locked-=l.amount;
  state.locks=state.locks.filter(x=>x.id!==id);state.txCount++;
  const txh=fakeHash();addHistory('lock','Unlocked '+l.amount+' USDC + '+l.reward+' reward',txh);
  updateBal();renderLocks();toast('Unlocked!',l.amount+' USDC + '+l.reward+' reward received','success',txh);
}
function refreshDashboard(){
  document.getElementById('dash-usdc').textContent=state.connected?state.usdc.toFixed(2):'‚Äî';
  document.getElementById('dash-locked').textContent=state.connected?state.locked.toFixed(2):'‚Äî';
  document.getElementById('dash-tx').textContent=state.connected?state.txCount:'‚Äî';
  document.getElementById('dash-nfts').textContent=state.connected?state.nfts.filter(n=>n.owned).length:'‚Äî';
  document.getElementById('dash-fees').textContent=state.connected?state.feesPaid:'‚Äî';
}
initEmojiPicker();
renderAll();
</script>
</body>
</html>
